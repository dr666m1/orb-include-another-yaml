description: >
  This command handles !include tag inside YAML file.
  The file will be overwritten.

parameters:
  filepath:
    type: string
    description: "YAML file which includes !include tag"

steps:
  - run:
      name: enable pyyaml
      command: pip install pyyaml jsonpath-ng
  - s2f/str2file:
      str: <<include(scripts/main.py)>>
  - run:
      name: include YAML file inside another
      environment:
        PARAM_FILEPATH: <<parameters.filepath>>
      command: python str2file-out
