description: >
  This command handles !include tag inside YAML file.

parameters:
  filepath:
    type: string
    description: "YAML file which includes !include tag"

steps:
  - run:
      name: enable pyyaml
      command: pip install pyyaml
  - run:
      name: copy scripts
      environment:
        INCLUDE_SCRIPT: <<include(scripts/include.py)>>
      command: |
        echo $INCLUDE_SCRIPT > include.py
  - run:
      name: include YAML file inside another
      environment:
        PARAM_FILEPATH: <<parameters.filepath>>
      command: python include.py
